(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8647:function(e,t,s){Promise.resolve().then(s.bind(s,3937))},3937:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(7437);function r(e){let{value:t,options:s,onChange:r,className:n}=e;return(0,a.jsx)("div",{className:"w-full min-w-0 ".concat(null!=n?n:""),children:(0,a.jsx)("select",{className:"w-full block min-w-0 appearance-none   px-3 py-2 rounded-lg bg-white/90 text-gray-900 text-sm font-medium shadow-sm   border border-black/10 hover:bg-white focus:outline-none focus:ring-2 focus:ring-black/10",value:t,onChange:e=>r(e.target.value),children:s.map(e=>{let{code:t,name:s}=e;return(0,a.jsxs)("option",{value:t,children:[t.toUpperCase()," ",s?"- ".concat(s):""]},t)})})})}var n=s(2265);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),o=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:i="",children:o,iconNode:m,...x}=e;return(0,n.createElement)("svg",{ref:t,...u,width:a,height:a,stroke:s,strokeWidth:l?24*Number(r)/Number(a):r,className:c("lucide",i),...!o&&!d(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),x=((e,t)=>{let s=(0,n.forwardRef)((s,a)=>{let{className:r,...i}=s;return(0,n.createElement)(m,{ref:a,iconNode:t,className:c("lucide-".concat(l(o(e))),"lucide-".concat(e),r),...i})});return s.displayName=o(e),s})("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);function h(e){let{from:t,to:s,amount:n,result:l,currencyOptions:i,onFromChange:o,onToChange:c,onAmountChange:d,onSwap:u,loading:m}=e;return(0,a.jsxs)("div",{className:"rounded-3xl bg-white/5 backdrop-blur border border-white/10 p-5 md:p-6 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-300",children:[(0,a.jsx)("span",{children:"From"}),(0,a.jsx)(x,{size:14,className:"text-gray-400"})]}),(0,a.jsx)("div",{className:"w-1/2 min-w-0 md:w-auto md:min-w-[260px]",children:(0,a.jsx)(r,{value:t,options:i,onChange:o})})]}),(0,a.jsx)("div",{className:"mt-2 text-6xl md:text-7xl font-semibold tracking-tight text-white",children:(0,a.jsx)("input",{className:"bg-transparent outline-none w-full",inputMode:"decimal",type:"number",min:"0",value:n,onChange:e=>d(e.target.value),placeholder:"Enter amount"})}),(0,a.jsxs)("div",{className:"relative my-6",children:[(0,a.jsx)("div",{className:"h-px bg-white/15"}),(0,a.jsx)("button",{type:"button",onClick:u,className:"absolute left-1/2 -translate-x-1/2 -top-3 bg-white text-gray-900 rounded-full w-8 h-8   flex items-center justify-center shadow-md border border-black/10 hover:scale-105 transition","aria-label":"Swap currencies",title:"Swap",children:"↕"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-300",children:"To"}),(0,a.jsx)("div",{className:"w-1/2 min-w-0 md:w-auto md:min-w-[260px]",children:(0,a.jsx)(r,{value:s,options:i,onChange:c})})]}),(0,a.jsx)("div",{className:"mt-2 text-4xl sm:text-6xl md:text-7xl font-semibold tracking-tight text-white",children:m?(0,a.jsx)("div",{className:"animate-pulse h-12 bg-white/10 rounded"}):Number.isFinite(null!=l?l:NaN)?l.toFixed(2):"—"})]})}function g(e){let{message:t,onRetry:s}=e;return(0,a.jsxs)("main",{className:"mx-auto max-w-2xl p-4 space-y-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Currency Converter"}),(0,a.jsx)("p",{className:"text-red-600",children:t}),s&&(0,a.jsx)("button",{onClick:s,className:"px-3 py-2 rounded bg-black text-white",children:"Retry"})]})}function p(){return(0,a.jsxs)("main",{className:"mx-auto max-w-2xl p-4 space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Currency Converter"}),(0,a.jsxs)("div",{className:"rounded-3xl bg-white/5 backdrop-blur border border-white/10 p-5 md:p-6 shadow-xl animate-pulse space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"h-4 w-12 bg-gray-700 rounded"}),(0,a.jsx)("div",{className:"h-8 w-32 bg-gray-700 rounded"})]}),(0,a.jsx)("div",{className:"h-12 sm:h-16 bg-gray-700 rounded"}),(0,a.jsxs)("div",{className:"relative my-6",children:[(0,a.jsx)("div",{className:"h-px bg-gray-700"}),(0,a.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 -top-3 w-8 h-8 bg-gray-700 rounded-full"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"h-4 w-12 bg-gray-700 rounded"}),(0,a.jsx)("div",{className:"h-8 w-32 bg-gray-700 rounded"})]}),(0,a.jsx)("div",{className:"h-12 sm:h-16 bg-gray-700 rounded"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Rates are updated daily (not live)."}),(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-5 w-32 bg-gray-700 rounded"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Array.from({length:8}).map((e,t)=>(0,a.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})]})}function b(e){let{code:t,value:s,onClick:r}=e;return(0,a.jsxs)("div",{onClick:()=>null==r?void 0:r(t),className:"border rounded-lg p-3 text-sm bg-white/5 border-white/10",children:[(0,a.jsx)("div",{className:"text-gray-400",children:t.toUpperCase()}),(0,a.jsx)("div",{className:"font-mono text-base",children:Number.isFinite(s)?null==s?void 0:s.toFixed(4):"—"})]})}let f="https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies",w=["usd","eur","thb","jpy","gbp","cny","aud","sgd","cad","chf","hkd","inr","krw","mxn","brl","rub"];async function j(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12e3,a=new AbortController,r=setTimeout(()=>a.abort(),s);try{let s=await fetch(e,{...t,signal:a.signal});if(!s.ok){let e=await s.text().catch(()=>"");throw{status:s.status,message:e||s.statusText,url:s.url}}return await s.json()}catch(t){if("object"==typeof t&&t&&"name"in t&&"AbortError"===t.name)throw{status:0,message:"Request timeout",url:e};if(t&&"object"==typeof t&&"status"in t)throw t;throw{status:0,message:"Network error",url:e}}finally{clearTimeout(r)}}let N=e=>e.trim().toLowerCase();class v{static async list(){return Object.fromEntries(Object.entries(await j("".concat(f,".json"))).map(e=>{let[t,s]=e;return[N(t),String(s)]}))}static async latest(e){let t=N(e),s=await j("".concat(f,"/").concat(t,".json")),a="string"==typeof s.date?s.date:"",r=s[t],n={};if(r&&"object"==typeof r)for(let[e,t]of Object.entries(r))"number"==typeof t&&Number.isFinite(t)&&(n[N(e)]=t);return{date:a,base:t,rates:n}}}function y(){let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(null),[l,i]=(0,n.useState)(!0),[o,c]=(0,n.useState)("usd"),[d,u]=(0,n.useState)("thb"),[m,x]=(0,n.useState)(""),[f,j]=(0,n.useState)(null),[N,y]=(0,n.useState)(null),[k,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=!0;return i(!0),r(null),v.list().then(s=>{e&&t(s)}).catch(t=>{e&&(console.error(t),r("Failed to load currency list"))}).finally(()=>{e&&i(!1)}),()=>{e=!1}},[]),(0,n.useEffect)(()=>{if(!o)return;let e=!0;return C(!0),y(null),v.latest(o).then(t=>{e&&j(t)}).catch(t=>{e&&(y((null==t?void 0:t.message)||"Failed to load rates"),j(null))}).finally(()=>{e&&C(!1)}),()=>{e=!1}},[o]);let S=(0,n.useMemo)(()=>{var e,t;return null!==(t=null==f?void 0:null===(e=f.rates)||void 0===e?void 0:e[d])&&void 0!==t?t:NaN},[f,d]),E=(0,n.useMemo)(()=>{let e=Number(m);return Number.isFinite(e)&&Number.isFinite(S)?e*S:NaN},[m,S]),F=(0,n.useMemo)(()=>{if(!e)return[];let t=Object.entries(e).map(e=>{let[t,s]=e;return{code:t,name:s}});return[...t.filter(e=>w.includes(e.code)),...t.filter(e=>!w.includes(e.code))]},[e]);return l&&!e?(0,a.jsx)(p,{}):s?(0,a.jsx)(g,{message:"โหลดรายการสกุลเงินไม่สำเร็จ: ".concat(s),onRetry:()=>{t(null),i(!0),r(null),window.location.reload()}}):N?(0,a.jsx)(g,{message:"โหลดรายการสกุลเงินไม่สำเร็จ: ".concat(N),onRetry:()=>{t(null),i(!0),y(null),window.location.reload()}}):(0,a.jsxs)("main",{className:"mx-auto max-w-2xl p-4 space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Currency Converter"}),(0,a.jsx)(h,{from:o,to:d,amount:m,result:Number.isFinite(E)?E:null,currencyOptions:F,onFromChange:c,onToChange:u,onAmountChange:x,onSwap:()=>{c(d),u(o)},loading:k&&!f}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Rates are updated daily (not live)."}),(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Exchange Rates"}),k&&f?(0,a.jsx)("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-32"}):f?(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:w.slice(0,16).map(e=>(0,a.jsx)(b,{code:e,value:f.rates[e],onClick:e=>u(e)},e))}):null]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8647)}),_N_E=e.O()}]);